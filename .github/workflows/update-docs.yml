

# this file was generated by https://github.com/nvfp/now-i-can-sleep

# WARNING: please use `nics update workflows` command if you want to edit this file,
#          instead of editing directly, some of them actually fine though to edit
#          directly, but some are not.
#          please read `https://nvfp.github.io/now-i-can-sleep/guide` to know more.


name: 🌟Rebuild docs

on:
  push:
    branches:
      - main

    paths:
      - 'docs/**'  # only rebuild docs webpage if docs/ folder is modified

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

permissions:
  contents: write

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:

      - name: 📂 Checkout main branch
        uses: actions/checkout@v3
        with:
          ref: main

      - name: 📚 Preparing NICS working dir...
        run: |
          echo "DEBUG: moving up.."
          cd ..
          echo "DEBUG: done. now at: $(pwd)"
          echo "DEBUG: files in this dir:"
          ls
          echo "-----------"

          echo "INFO: creating NICS working directory.."
          mkdir __nics_work_dir__
          echo "DEBUG: dir '__nics_work_dir__' is created."
          echo "DEBUG: files in this dir:"
          ls
          echo "-----------"

          echo "DEBUG: go inside _nics_work_dir"
          cd __nics_work_dir__
          echo "DEBUG: files in this dir ($(pwd)):"
          ls
          echo "-----------"
          
          echo "INFO: copying docs/ from main branch into __nics_work_dir__"
          cp -r ../mykit/docs/ .
          echo "INFO: copied!"
          echo "-----------"

          echo "DEBUG: files in this dir ($(pwd)):"
          ls
          echo "-----------"

      - name: Set up Python🐍
        uses: actions/setup-python@v2
        with:
          python-version: 3.8
      
      - name: TESTING
        run: |
          echo "DEBUG: files in this dir ($(pwd)):"
          ls
          echo "-----------"

      # - name: 🛒 Install dependencies
      #   run: |
      #     python -m pip install --upgrade pip
      #     pip install -U nics

      # - name: 🌱 Install dependencies
      #   run: |
      #     python -m pip install --upgrade pip
      #     pip install -U nics

      - name: 📂 Checkout docs branch
        uses: actions/checkout@v3
        with:
          ref: docs
      
      - name: TESTING
        run: |
          echo "DEBUG: files in this dir ($(pwd)):"
          ls
          echo "-----------"

      # - name: ⚙️ Compiling...
      #   run: |
      #     echo "Current directory: $(pwd)"
      #     echo "Files in current directory:"
      #     ls

      # - name: ✨ DEPLOY!
      #   run: |
      #     echo "Current directory: $(pwd)"
      #     echo "Files in current directory:"
      #     ls

      # - name: list docs
      #   run: ls -R
      
      # - name: test create a file
      #   run: echo "This is a sample file" > newfile123123.txt

      # - name: test commit and push changes
      #   run: |
      #     git config user.name "NICS"
      #     git config user.email "youremail@example.com"
      #     git add .
      #     git commit -m "testing Gaction: Add newfile.txt via workflow"
      #     git push